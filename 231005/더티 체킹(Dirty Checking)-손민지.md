# 더티 체킹(Dirty Checking)

Dirty : 상태의 변화가 생김, Checking : 검사를 의미하여 간단히 해석하면 변경 감지로 볼 수 있고,   
**트랜잭션이 끝나는 시점에 변화가 있던 모든 Entity를 감지한 뒤, 변경된 내용을 자동으로 DB에 반영**하는 것을 의미한다.  
(변경은 최초 조회 상태가 기준이다)  

1) JPA에서 Entity를 조회
2) 조회된 상태의 Entity에 대한 스냅샷 생성
3) 트랜잭션 커밋 후 해당 스냅샷과 현재 Entity 상태의 다른 점을 체크
4) 다른 점들을 update 쿼리로 데이터베이스에 전달

더티 체킹을 검사하는 대상은 **영속성 컨텍스트가 관리하는 Entity만 해당**된다.  
준영속, 비영속 Entity는 값을 변경할 지라도 데이터베이스에 반영시키지 않는다.  

기본적으로 더티 체킹을 실행하면, SQL에서는 변경된 엔티티의 모든 내용을 update 쿼리로 만들어 전달하는데,  
이때 **필드가 많아지면 전체 필드를 update하는게 비효율적**일 수도 있다.  
이럴 경우에는 **@DynamicUpdate를 해당 Entity에 선언하여 변경 필드만 반영시키도록 만들어**줄 수 있다.  
