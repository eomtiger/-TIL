# FTP
> 파일 전송 프로토콜(File Transfer Protocol)은 응용 계층의 프로토콜 중 하나로 TCP/IP 프로토콜을 가지고 서버와 클라이언트 사이의 파일 전송을 하기 위한 프로토콜입니다.

<br>

### FTP 특징
- 클라이언트/서버 관계를 이루며 동작합니다.
- 데이터가 평문으로 전송되어 보안성이 매우 떨어지므로 FTPS 사용을 권장합니다.
- 21번 포트를 사용(FTPS: 21번 포트)
```md
**FTPS**
FTP에 TLS 프로토콜이 적용된 프로토콜
```

<br>

### 개요
연결을 위해서 2가지 TCP 연결이 필요
1. 제어 연결: 전체 FTP 세션 동안 상시 연결 유지(FTP-CONTROL)
    - 명령과 응답 방식으로 동작합니다.
    - 각 한줄로 이어지며, 그 끝은 'CR+LF'로 끝납니다.
    - 제어정보 전달용 -> TCP 21번 포트(반이중 방식 연결)

2. 데이터 연결: 파일 전송시마다, 연결 설정되고 바로 폐쇄됩니다.(FTP-DATA)
    - 전송되는 데이터 형태가 '파일 종류', '데이터 구조', '전송 모드'마다 달라집니다.
        - 파일 종류: ASCII 파일, EBCDIC 파일, 2진 파일
        - 데이터 구조: 연속적인 바이트, 레코드, 페이지
        - 전송 모드: 스트림, 블록, 압축
    - 클라이언트 측에서 설정합니다.
    - 데이터 전달용 -> TCP 20번 포트(전이중 방식 연결)

<br>

### 연결 모드
1. Active 모드: 서버쪽에서 클라이언트로 접속
    - 클라이언트가 1024번 이상의 N번 포트로, 서버의 21번 포트로 제어 연결 접속
    - 서버는 20번 포트로부터 클라이언트의 N+1 포트로의 데이터 연결 구축
2. Passive 모드: 클라이언트에서 서버로 접속
    - 클라이언트가 1024번 이상의 N번 포트로, 서버의 21번 포트로 제어 연결 접속
    - 서버는 1024번 이상의 정해진 포트 번호를 클라이언트에 알려주고, 클라이언트는 N+1 포트로부터 서버가 알려준 해당 포트로의 데이터 연결

<br>

### 보안 강화
**FTPS(FTP SSL/TLS)**
- 응용 계층 FTP와 전송 계층 TCP 사이에 보안 소켓 계층(SSL)을 추가하여 사용하는 형태입니다.
  
**SFTP**
- SSH 프로토콜 일부인 SSH 응용요소로써, 쌍방향 파일 전송을 위한 인터페이스 명령어입니다.
- FTP와는 완전히 다른 프로토콜입니다.