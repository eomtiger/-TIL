# 정규화(Normalization)

  **정규화**란 데이터의 일관성, 최소한의 데이터 중복, 최대한의 데이터 유연성을 확보하기 위해서 데이터를 분해하는 과정을 말한다.

### 목적

- 데이터의 중복을 없애면서 불필요한 데이터를 최소화시킨다.
- 무결성을 지키고, 이상 현상을 방지한다.
- 테이블 구성을 논리적이고 직관적으로 할 수 있다.
- 데이터베이스 구조를 확장에 용이해진다.

## 정규화 절차

- **제 1정규화**: 속성(Attribute)의 원자성을 확보한다. 기본키를 설정한다.
- **제 2정규화**: 기본키가 2개 이상의 속성으로 이루어진 경우, **부분 함수 종속성을 제거**한다.
- **제 3정규화**: 기본키를 제외한 컬럼간의 종속성을 제거한다. 즉, **이행 함수 종속성을 제거**한다.
- BCNF: 기본키를 제외하고 후보키가 있는 경우, 후보키가 기본키를 종속시키면 분해한다.
- 제 4정규화: 여러 칼럼들이 하나의 칼럼을 종속시키는 경우 분해하여 다중 값 속성을 제거한다.
- 제 5정규화: 조인에 의해서 종속성이 발생되는 경우 분해한다.

### 제 1 정규화

테이블 컬럼이 원자값(하나의 값)을 갖도록 테이블을 분리시키는 것을 말한다.

만족해야 할 조건은 아래와 같다.

- 어떤 릴레이션에 속한 모든 도메인이 원자값만으로 되어 있어야한다.
- 모든 속성에 반복되는 그룹이 나타나지 않는다.
- 기본키를 사용하여 관련 데이터의 각 집합을 고유하게 식별할 수 있어야 한다.

| STUDENT_ID | COURSE_ID | STUDENT_NM |
| --- | --- | --- |
| 20800399 | CSE011101, CSE022202, CSE033303 | 하이 |

현재 테이블은 `COURSE_ID`를 여러개 가지고 있어 원자값이 아니다. 따라서 1NF에 맞추기 위해서는 아래와 같이 분리할 수 있다.

| STUDENT_ID | COURSE_ID | STUDENT_NM |
| --- | --- | --- |
| 20800399 | CSE011101 | 하이 |
| 20800399 | CSE022202 | 하이 |
| 20800399 | CSE033303 | 하이 |

### **제 2정규화**

테이블의 모든 컬럼이 완전 함수적 종속을 만족해야 한다. 조금 쉽게 말하면, 테이블에서 기본키가 복합키(키1, 키2)로 묶여있을 때, 두 키 중 하나의 키만으로 다른 컬럼을 결정지을 수 있으면 안된다.

| 학번 | 과목코드 | 성적 | 학부 | 등록금 |
| --- | --- | --- | --- | --- |
| 20800399 | CSE011101 | A+ | 컴퓨터공학부 | 350 |
| 20800399 | CSE022202 | A | 컴퓨터공학부 | 350 |
| 20800399 | CSE033303 | B+ | 컴퓨터공학부 | 350 |
| 21300758 | MEC011101 | F | 경영학부 | 300 |
| 21400001 | POD032939 | C+ | 기계공학부 | 400 |
| 21500399 | CSE011101 | D | 컴퓨터공학부 | 350 |

`**학번**` 과 `**과목코드**` 가 키가 되어 `성적` 을 알 수 있다. 하지만 `학부` 와 `등록금` 의 경우, 오직 `**학번**` 만으로도 `학부` 나 `등록금` 을 결정 지을 수 있게 된다. 학번→학부, 학번→등록금 이 두개의 부분 함수 종속성을 제거하여 제 2정규화를 만족시키면 다음과 같다.

**학생 릴레이션**

| 학번 | 학부 | 등록금 |
| --- | --- | --- |
| 20800399 | 컴퓨터공학부 | 350 |
| 21300758 | 경영학부 | 300 |
| 21400001 | 기계공학부 | 400 |
| 21500399 | 컴퓨터공학부 | 350 |

**성적 릴레이션**

| 학번 | 과목코드 | 성적 |
| --- | --- | --- |
| 20800399 | CSE011101 | A+ |
| 20800399 | CSE022202 | A |
| 20800399 | CSE033303 | B+ |
| 21300758 | MEC011101 | F |
| 21400001 | POD032939 | C+ |
| 21500399 | CSE011101 | D |

### **제 3정규화**

2NF가 진행된 테이블에서 이행적 종속을 없애기 위해 테이블을 분리하는 것이다.

> 이행적 종속 : A → B, B → C면 A → C가 성립된다
> 

아래 두가지 조건을 만족시켜야 한다.

- 릴레이션이 2NF에 만족한다.
- 기본키가 아닌 속성들은 기본키에 의존한다.

| 학번 | 학부 | 등록금 |
| --- | --- | --- |
| 20800399 | 컴퓨터공학부 | 350 |
| 21300758 | 경영학부 | 300 |
| 21400001 | 기계공학부 | 400 |
| 21500399 | 컴퓨터공학부 | 350 |

지금 학생 릴레이션에서 함수적 종속성은 아래와 같다.

```
  학번 -> 학부
	학부 -> 등록금
	학번 -> 등록금
```

분리하여 이행적 종속 관계를 제거 한 학생 릴레이션과 학부 릴레이션은 아래와 같다.

| 학번 | 학부 |
| --- | --- |
| 20800399 | 컴퓨터공학부 |
| 21300758 | 경영학부 |
| 21400001 | 기계공학부 |
| 21500399 | 컴퓨터공학부 |

| 학부 | 등록금 |
| --- | --- |
| 컴퓨터공학부 | 350 |
| 경영학부 | 300 |
| 기계공학부 | 400 |

### 참고

- https://gyoogle.dev/blog/computer-science/data-base/Normalization.html
- https://wkdtjsgur100.github.io/database-normalization/
- [https://github.com/Songwonseok/CS-Study/blob/main/Database/정규화.md?plain=1](https://github.com/Songwonseok/CS-Study/blob/main/Database/%EC%A0%95%EA%B7%9C%ED%99%94.md?plain=1)
- https://data-study-clip.tistory.com/107
