# 멀티 스레드의 동시성과 병렬성
### 동시성
> 멀티 작업을 위해 싱글 코어에서 여러 개의 스레드가 번갈아 실행하는 것을 의미합니다.
(동시성에서 말하는 '동시'는 같은 시간이 아니라 인간의 시점에서 동시에 작동하는 것처럼 보이도록 아주 빠르게 스레드를 번갈아 실행하는 것)

### 병렬성
> 멀티 작업을 위해 멀티 코어에서 한개 이상의 쓰레드를 포함하는 각 코어들을 동시에 실행하는 것을 의미합니다.
(여기서 이야기하는 동시는 같은 시간을 의미함)

---

### 배경 지식

<br>

### 멀티 프로세스

> 하나의 프로그램을 여러개의 프로세스로 구성하여 각 프로세스가 병렬적으로 작업을 수행하는 것
> 
- 장점
    - **안정성**
        
        > 각 프로세스가 독립적인 메모리 공간을 가지므로, 한 프로세스가 비정상적으로 종료해도 다른 프로세스에 영향을 주지 않는다.
        > 
    - **시스템 확장성**
        
        > 각 프로세스가 독립적이므로 새로운 모듈, 기능을 추가하거나 수정할 때 다른 프로세스에 영향을 주지 않기에 쉽게 확장이 가능하다.
        > 
- 단점
    - **Context Switching Overhead**
        
        > 프로세스는 스레드와 다르게 메모리 자원 공유를 하지 않기에 Context Switching 시 현재 작업중인 프로세스의 상태를 PCB에 저장하고 다음 프로세스의 정보를 불러오기 위해 메모리 검색 및 CPU 캐시 메모리 초기화를 해야한다. 이러한 작업이 빈번하게 일어나게 된다면 비용 오버헤드가 발생할 수 있게 된다.
        > 
    - **자원 공유 비효율성**
        
        > 각 프로세스는 독립적인 메모리 공간을 가지기에 자원 공유가 필요할 경우 복잡한 통신 기법인 IPC를 사용해야 한다. IPC는 자체로 오버헤드가 발생하게 되고 코드의 복잡도를 증가시키기에 자원 공유에 있어 비효율적인 모습을 보인다.
        > 

### 멀티 스레드

> 하나의 응용 프로그램에서 여러 스레드를 구성해 각 스레드가 하나의 작업을 처리하는 것
> 
- 장점
    - **프로세스보다 가볍다**
        
        > 스레드는 프로세스 내에서 생성되고 생성 및 종료가 빠르다. 또한 스레드는 스택 영역을 제외한 나머지 영역을 공유하기에 프로세스보다 데이터 용량이 작기에 프로세스보다 가볍다.
        > 
    - **자원의 효율성**
        
        > 멀티 스레드는 각 스레드 간의 자원 공유가 가능하여 IPC를 사용하지 않고도 자원을 공유가 가능하다.
        > 
    - **Context Switching 비용 감소**
        
        > 스레드에도 Context Swithcing Overhead가 존재하지만 자원을 공유한다는 특성으로 인해 프로세스보다 비용이 낮다.
        > 
- 단점
    - **안정성 문제**
        
        > 스레드들은 서로 간의 자원을 공유하기에 하나의 스레드에서 문제가 발생하면 다른 스레드들에게도 영향이 가게 되어 안정성 문제가 발생할 수 있다.
        > 
    - **동기화로 인한 성능 저하**
        
        > 스레드들은 서로 간의 자원을 공유하기에 여러 스레드가 동시에 한 자원을 변경해 버린다면 치명적인 버그가 발생할수도 있다. 따라서 동기화 작업이 필요한데 이로 인해 병목 현상이 일어나 성능이 저하될 가능성이 존재한다.
        > 
    - **데드락**
        
        > 다수의 프로세스나 스레드가 서로 자원을 점유하고, 다른 프로세스나 스레드가 점유한 자원을 무한정 기다리는 교착 상태가 발생할 수 있다.
        > 
    - **Context Switching Overhead(??)**
        
        > 멀티 스레드는 멀티 프로세스에 비해 Context Switching 비용이 낮아 성능에 유리하다고 했지만 비용을 무시할 수는 없다. 특히 스레드 수가 많으면 그만큼 스위칭이 많이 발생하게 되고 이는 성능 저하로 이어진다. 그렇기에 스레드를 많이 쓸수록 항상 성능이 좋아지는지에 대한 고민이 필요하다.
        > 
    - **디버깅 난이도**
        
        > 멀티 스레드를 사용하면 여러 개의 스레드가 동시에 실행되기에 각 스레드의 동작을 추적하기 어려워 디버깅에 어려움을 겪을 수 있다.
        >